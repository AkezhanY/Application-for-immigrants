<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title data-i18n="headTitle">Pierwsze Kroki - Aplikacja dla Imigrantów</title>
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#fff;color:#666;min-height:100vh;display:flex;flex-direction:column}
    .header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;position:relative;z-index:1000;border-bottom:1px solid #f0f0f0}
    .left-icons{display:flex;gap:15px;align-items:center}
    .menu-icon,.phone-icon,.language-icon,.back-icon{width:24px;height:24px;cursor:pointer;transition:transform .2s}
    .menu-icon:hover,.phone-icon:hover,.language-icon:hover,.back-icon:hover{transform:scale(1.1)}
    .dropdown{position:absolute;top:50px;background:#fff;border:1px solid #ddd;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.15);display:none;min-width:200px;z-index:1001}
    .dropdown.show{display:block}
    .menu-dropdown{left:0}.phone-dropdown{left:45px}.language-dropdown{right:0;min-width:150px}
    .dropdown-item{padding:12px 16px;cursor:pointer;transition:background-color .2s;border-bottom:1px solid #f0f0f0}
    .dropdown-item:last-child{border-bottom:none}
    .dropdown-item:hover{background:#f8f8f8}
    .dropdown-item.phone-item{display:flex;justify-content:space-between;align-items:center}
    .dropdown-item.phone-item .phone-number{color:#ff6b35;font-weight:700}
    .dropdown-item.language-item{display:flex;align-items:center;gap:8px}
    .flag-emoji{font-size:18px}

    .main-content{flex:1;padding:20px;max-width:900px;margin:0 auto;width:100%}
    .page-title{text-align:center;font-size:24px;color:#ff6b35;margin-bottom:10px;font-weight:700}
    .breadcrumb{text-align:center;font-size:14px;color:#999;margin:10px 0 25px}
    .breadcrumb-item{cursor:pointer;color:#ff6b35;text-decoration:underline}

    .tiles-container{display:grid;grid-template-columns:repeat(2,1fr);gap:15px;margin-bottom:20px}
    .tile{background:#fff;border:2px solid #f0f0f0;border-radius:12px;padding:20px;text-align:center;cursor:pointer;transition:all .3s;box-shadow:0 2px 8px rgba(0,0,0,.05);min-height:100px;display:flex;align-items:center;justify-content:center}
    .tile:hover{border-color:#ff6b35;box-shadow:0 4px 15px rgba(255,107,53,.2);transform:translateY(-2px)}
    .tile-title{font-size:16px;color:#333;font-weight:600;line-height:1.3}

    .content-page{background:#fff;border-radius:12px;padding:25px;box-shadow:0 2px 15px rgba(0,0,0,.1);margin-top:10px}
    .content-title{font-size:20px;color:#ff6b35;margin-bottom:12px;font-weight:700}
    .content-text{font-size:16px;color:#666;line-height:1.6}

    .overlay{position:fixed;inset:0;background:rgba(0,0,0,.3);display:none;z-index:999}
    .overlay.show{display:block}

    @media (max-width:600px){
      .tiles-container{grid-template-columns:1fr}
      .main-content{padding:15px}
      .page-title{font-size:20px}
      .tile{padding:15px;min-height:80px}
      .tile-title{font-size:14px}
    }
  </style>
</head>
<body>
  <div class="overlay" id="overlay"></div>

  <header class="header">
    <div class="left-icons">
      <a href="index.html" aria-label="Back">
        <svg class="back-icon" id="backIcon" viewBox="0 0 24 24" fill="#ff6b35">
          <path d="M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"/>
        </svg>
      </a>

      <svg class="menu-icon" id="menuIcon" viewBox="0 0 24 24" fill="#666">
        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
      </svg>

      <svg class="phone-icon" id="phoneIcon" viewBox="0 0 24 24" fill="#ff6b35">
        <path d="M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c .55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"/>
      </svg>

      <div class="dropdown menu-dropdown" id="menuDropdown">
        <div class="dropdown-item" data-link="pierwsze.html" data-i18n="menu.firstSteps">Pierwsze kroki</div>
        <div class="dropdown-item" data-link="ankieta2.html" data-i18n="menu.survey">Ankieta</div>
        <div class="dropdown-item" data-link="bazawiedzy.html" data-i18n="menu.knowledge">Baza wiedzy</div>
        <div class="dropdown-item" data-link="pomoc.html" data-i18n="menu.help">Pomoc</div>
      </div>

      <div class="dropdown phone-dropdown" id="phoneDropdown">
        <div class="dropdown-item phone-item">
          <span data-i18n="phone.police">Policja</span><span class="phone-number">997</span>
        </div>
        <div class="dropdown-item phone-item">
          <span data-i18n="phone.cityOffice">Urząd Miasta</span><span class="phone-number">24 367 15 00</span>
        </div>
        <div class="dropdown-item phone-item">
          <span data-i18n="phone.cityGuard">Straż Miejska</span><span class="phone-number">24 367 15 86</span>
        </div>
        <div class="dropdown-item phone-item">
          <span data-i18n="phone.immigrantCenter">Ośrodek dla Imigrantów</span><span class="phone-number">24 367 16 50</span>
        </div>
      </div>
    </div>

    <svg class="language-icon" id="languageIcon" viewBox="0 0 24 24" fill="#ff6b35" aria-label="Language">
      <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
    </svg>

    <div class="dropdown language-dropdown" id="languageDropdown">
      <div class="dropdown-item language-item" data-lang="pl"><span class="flag-emoji">🇵🇱</span><span>Polski</span></div>
      <div class="dropdown-item language-item" data-lang="en"><span class="flag-emoji">🇬🇧</span><span>English</span></div>
      <div class="dropdown-item language-item" data-lang="ru"><span class="flag-emoji">🇷🇺</span><span>Русский</span></div>
    </div>
  </header>

  <main class="main-content">
    <h1 class="page-title" id="pageTitle" data-i18n="title">BAZA WIEDZY</h1>
    <div class="breadcrumb" id="breadcrumb"></div>

    <div class="tiles-container" id="tilesContainer"></div>

    <div class="content-page" id="contentPage" style="display:none;">
      <div class="content-title" id="contentTitle"></div>
      <div class="content-text" id="contentText"></div>
    </div>
  </main>

 <script>
  
  const menuStructure = {
    "komunikacja": {
      "transport publiczny": {
        "rower miejski":
          "Informacje o systemie roweru miejskiego w Płocku. Dowiedz się jak wypożyczyć rower, gdzie znajdziesz stacje oraz jakie są koszty.",
        "rozkład jazdy PKM":
          "Aktualny rozkład jazdy Płockiej Komunikacji Miejskiej. Sprawdź godziny odjazdów autobusów i planuj swoją podróż.",
        "rozkład jazdy KM":
          "Rozkład jazdy komunikacji międzymiastowej. Połączenia z innych miast do Płocka i z Płocka do innych miejscowości.",
      },
      "transport własny": {
        "prawo jazdy":
          "Informacje o uzyskiwaniu polskiego prawa jazdy. Wymiana zagranicznego prawa jazdy, egzaminy, wymagane dokumenty.",
        "prawo drogowe":
          "Podstawowe zasady ruchu drogowego w Polsce. Znaki drogowe, przepisy, mandaty i punkty karne.",
        "rejestracja pojazdu":
          "Proces rejestracji samochodu w Polsce. Wymagane dokumenty, koszty, przeglądy techniczne i ubezpieczenie.",
      },
    },
    pobyt: {
      PESEL:
        "PESEL to numer identyfikacyjny każdego obywatela Polski. Dowiedz się jak go uzyskać i do czego jest potrzebny.",
      "karta pobytu":
        "Informacje o karcie pobytu dla cudzoziemców. Rodzaje kart, procedura składania wniosku, wymagane dokumenty.",
      obywatelstwo:
        "Proces uzyskiwania polskiego obywatelstwa. Warunki, dokumenty, procedura i czas oczekiwania na decyzję.",
      wiza:
        "Różne rodzaje wiz do Polski. Wiza turystyczna, biznesowa, studencka - wymagania i procedury.",
      "polskie nr telefonu":
        "Jak uzyskać polski numer telefonu. Operatorzy komórkowi, oferty, wymagane dokumenty.",
      ubezpieczenie:
        "System ubezpieczeń w Polsce. NFZ, ubezpieczenie zdrowotne, społeczne - jak się ubezpieczyć.",
      "finanse (konto bankowe)":
        "Otwieranie konta bankowego w Polsce. Wymagane dokumenty, rodzaje kont, opłaty bankowe.",
      bezpieczeństwo:
        "Informacje o bezpieczeństwie w Płocku. Numery alarmowe, komisariaty policji, straż miejska.",
    },
    praca: {
      "szukam pracy": {
        "zezwolenie na pracę":
          "Zezwolenie na pracę dla cudzoziemców. Rodzaje zezwoleń, procedura, wymagane dokumenty.",
        "urząd pracy":
          "Powiatowy Urząd Pracy w Płocku. Oferty pracy, doradztwo zawodowe, kursy i szkolenia.",
        "centralna baza pracy":
          "Jak korzystać z centralnej bazy ofert pracy. Rejestracja, wyszukiwanie ofert, aplikowanie.",
        KRS:
          "Krajowy Rejestr Sądowy - informacje o firmach. Jak sprawdzić dane przedsiębiorcy, rejestracja firmy.",
        CEIDG:
          "Centralna Ewidencja i Informacja o Działalności Gospodarczej. Rejestracja działalności gospodarczej.",
      },
      "własny biznes":
        "Zakładanie własnej firmy w Polsce. Rodzaje działalności, procedury rejestracji, podatki i składki.",
    },
    mieszkanie: {
      "zakup mieszkania":
        "Proces kupna mieszkania w Polsce. Procedury prawne, kredyty hipoteczne, podatki, notariusz.",
      wynajem:
        "Wynajem mieszkania - prawa i obowiązki. Umowa najmu, kaucja, opłaty, ochrona lokatorów.",
      "mieszkanie socjalne":
        "Mieszkania socjalne w Płocku. Warunki przyznania, procedura składania wniosku, lista oczekujących.",
      "zakwaterowanie zbiorowe":
        "Tymczasowe zakwaterowanie dla imigrantów. Hostele, domy pomocy, schroniska.",
    },
    edukacja: {
      dzieci: {
        żłobek:
          "Żłobki w Płocku. Procedura zapisów, wymagane dokumenty, opłaty, lista placówek.",
        przedszkole:
          "Przedszkola publiczne i prywatne. Rekrutacja, program wychowania, przygotowanie do szkoły.",
        "szkoła podstawowa":
          "System edukacji podstawowej w Polsce. Obwody szkolne, procedura zapisów, program nauczania.",
        "szkoła ponadpodstawowa":
          "Licea, technika, szkoły zawodowe. Rekrutacja, profile klas, egzaminy maturalne.",
      },
      dorośli:
        "Edukacja dorosłych w Płocku. Szkoły wieczorowe, kursy języka polskiego, uniwersytety, kwalifikacje.",
    },
    "zdrowie i sprawy socjalne": {
      "pomoc prawna":
        "Bezpłatna pomoc prawna w Płocku. Punkty pomocy, procedury, uprawnienia do pomocy.",
      "wybór przychodni POZ":
        "Podstawowa Opieka Zdrowotna. Jak wybrać lekarza POZ, rejestracja, świadczenia.",
      "gdzie się leczyć - NFZ":
        "System ochrony zdrowia NFZ. Jak korzystać z publicznej służby zdrowia, skierowania.",
      ubezpieczenie:
        "Ubezpieczenie zdrowotne w Polsce. Składki, uprawnienia, karta EKUZ dla cudzoziemców.",
      MOPS:
        "Miejski Ośrodek Pomocy Społecznej. Świadczenia socjalne, zasiłki, pomoc w trudnej sytuacji.",
      apteka:
        "Apteki w Płocku. Godziny otwarcia, apteki dyżurne, recepty, leki bez recepty.",
      recepta:
        "System recept w Polsce. E-recepta, realizacja, dopłaty do leków, leki refundowane.",
    },
    "czas wolny": {
      "kalendarz imprez":
        "Kalendarz wydarzeń kulturalnych w Płocku. Koncerty, festiwale, wystawy, wydarzenia miejskie.",
      "PŁOCK ARTA":
        "Centrum kultury i sztuki. Spektakle teatralne, koncerty, wystawy, warsztaty artystyczne.",
      POKIS:
        "Płocki Ośrodek Kultury i Sztuki. Działalność kulturalna, kursy, zespoły artystyczne.",
      MOSIR:
        "Miejski Ośrodek Sportu i Rekreacji. Obiekty sportowe, zajęcia fitness, basen, korty tenisowe.",
      MDK:
        "Miejski Dom Kultury. Koła zainteresowań, kursy, zajęcia dla dzieci i dorosłych.",
      SDK:
        "Społeczno-Kulturalny Dom. Działalność społeczna i kulturalna dzielnic miasta.",
      "Książnica Płocka":
        "Biblioteka miejska. Zbiory książek, czasopism, czytelnie, wydarzenia literackie.",
      sport:
        "Obiekty i kluby sportowe w Płocku. Stadiony, hale sportowe, kluby piłkarskie, drużyny.",
      kultura:
        "Życie kulturalne miasta. Muzea, galerie, zabytki, trasy turystyczne, dziedzictwo kulturowe.",
      rekreacja:
        "Miejsca rekreacji w Płocku. Parki, skwery, bulwary nad Wisłą, ścieżki rowerowe.",
      hobby:
        "Kluby i koła zainteresowań. Modelarstwo, fotografia, kolekcjonerstwo, gry planszowe.",
      religia:
        "Wspólnoty religijne w Płocku. Kościoły, parafie, inne wyznania, wydarzenia religijne.",
      "Uniwersytet 3 Wieku":
        "Edukacja dla seniorów. Wykłady, wycieczki, zajęcia, spotkania towarzyskie.",
    },
  };

  
  const i18n = {
    pl: {
      headTitle: "BAZA WIEDZY - Aplikacja dla Imigrantów",
      title: "BAZA WIEDZY",
      rootCrumb: "BAZA WIEDZY",
      menu: {
        firstSteps: "Pierwsze kroki",
        survey: "Ankieta",
        knowledge: "Baza wiedzy",
        help: "Pomoc",
      },
      phone: {
        police: "Policja",
        cityOffice: "Urząd Miasta",
        cityGuard: "Straż Miejska",
        immigrantCenter: "Ośrodek dla Imigrantów",
      },
    },
    en: {
      headTitle: "KNOWLEDGE BASE - Immigrants App",
      title: "KNOWLEDGE BASE",
      rootCrumb: "KNOWLEDGE BASE",
      menu: { firstSteps: "First steps", survey: "Survey", knowledge: "Knowledge base", help: "Help" },
      phone: {
        police: "Police",
        cityOffice: "City Office",
        cityGuard: "City Guard",
        immigrantCenter: "Immigrant Center",
      },
    },
    ru: {
      headTitle: "БАЗА ЗНАНИЙ — Приложение для иммигрантов",
      title: "БАЗА ЗНАНИЙ",
      rootCrumb: "БАЗА ЗНАНИЙ",
      menu: { firstSteps: "Первые шаги", survey: "Анкета", knowledge: "База знаний", help: "Помощь" },
      phone: {
        police: "Полиция",
        cityOffice: "Городская управа",
        cityGuard: "Муниципальная стража",
        immigrantCenter: "Центр для иммигрантов",
      },
    },
  };

  
  const i18nLabels = {
    komunikacja: { en: "COMMUNICATION", ru: "СООБЩЕНИЕ" },
    pobyt: { en: "RESIDENCE", ru: "ПРЕБЫВАНИЕ" },
    praca: { en: "WORK", ru: "РАБОТА" },
    mieszkanie: { en: "HOUSING", ru: "ЖИЛЬЁ" },
    edukacja: { en: "EDUCATION", ru: "ОБРАЗОВАНИЕ" },
    "zdrowie i sprawy socjalne": { en: "HEALTH & SOCIAL", ru: "ЗДОРОВЬЕ И СОЦИАЛЬНОЕ" },
    "czas wolny": { en: "LEISURE", ru: "ДОСУГ" },
    "transport publiczny": { en: "Public transport", ru: "Общественный транспорт" },
    "transport własny": { en: "Own transport", ru: "Личный транспорт" },
    "szukam pracy": { en: "Job search", ru: "Поиск работы" },
    "własny biznes": { en: "Own business", ru: "Собственный бизнес" },
    dzieci: { en: "Children", ru: "Дети" },
    dorośli: { en: "Adults", ru: "Взрослые" },
    "rower miejski": { en: "City bike", ru: "Городские велосипеды" },
    "rozkład jazdy PKM": { en: "PKM timetable", ru: "Расписание PKM" },
    "rozkład jazdy KM": { en: "Intercity timetable", ru: "Междугороднее расписание" },
    "prawo jazdy": { en: "Driving licence", ru: "Водительские права" },
    "prawo drogowe": { en: "Traffic rules", ru: "ПДД" },
    "rejestracja pojazdu": { en: "Vehicle registration", ru: "Регистрация ТС" },
    PESEL: { en: "PESEL", ru: "PESEL" },
    "karta pobytu": { en: "Residence card", ru: "Карта побыту" },
    obywatelstwo: { en: "Citizenship", ru: "Гражданство" },
    wiza: { en: "Visa", ru: "Виза" },
    "polskie nr telefonu": { en: "Polish phone number", ru: "Польский номер телефона" },
    ubezpieczenie: { en: "Insurance", ru: "Страхование" },
    "finanse (konto bankowe)": { en: "Bank account", ru: "Банковский счёт" },
    bezpieczeństwo: { en: "Safety", ru: "Безопасность" },
    "zezwolenie na pracę": { en: "Work permit", ru: "Разрешение на работу" },
    "urząd pracy": { en: "Labour Office", ru: "Центр занятости" },
    "centralna baza pracy": { en: "Central job database", ru: "Центральная база вакансий" },
    KRS: { en: "National Court Register", ru: "Нац. судебный реестр (KRS)" },
    CEIDG: { en: "Business registry (CEIDG)", ru: "Реестр предпринимателей (CEIDG)" },
    "zakup mieszkania": { en: "Buying a flat", ru: "Покупка жилья" },
    wynajem: { en: "Renting", ru: "Аренда" },
    "mieszkanie socjalne": { en: "Social housing", ru: "Социальное жильё" },
    "zakwaterowanie zbiorowe": { en: "Group accommodation", ru: "Временное размещение" },
    żłobek: { en: "Nursery", ru: "Ясли" },
    przedszkole: { en: "Kindergarten", ru: "Детский сад" },
    "szkoła podstawowa": { en: "Primary school", ru: "Начальная школа" },
    "szkoła ponadpodstawowa": { en: "Secondary school", ru: "Средняя школа" },
    "pomoc prawna": { en: "Legal aid", ru: "Юридическая помощь" },
    "wybór przychodni POZ": { en: "Choose GP clinic", ru: "Выбор поликлиники" },
    "gdzie się leczyć - NFZ": { en: "Where to get care (NFZ)", ru: "Где лечиться (NFZ)" },
    MOPS: { en: "Social welfare center", ru: "Соц. помощь (MOPS)" },
    apteka: { en: "Pharmacy", ru: "Аптека" },
    recepta: { en: "Prescription system", ru: "Система рецептов" },

    
    "kalendarz imprez": { en: "Events calendar", ru: "Календарь событий" },
    "PŁOCK ARTA": { en: "Płock Arta", ru: "Плоцк Арта" },
    POKIS: { en: "POKiS", ru: "POKiS" },
    MOSIR: { en: "MOSiR", ru: "MOSiR" },
    MDK: { en: "Youth Culture House", ru: "Молодёжный дом культуры" },
    SDK: { en: "Community Culture House", ru: "Старый дом культуры" },
    "Książnica Płocka": { en: "Płock Library", ru: "Плоцкая библиотека" },
    sport: { en: "Sport", ru: "Спорт" },
    kultura: { en: "Culture", ru: "Культура" },
    rekreacja: { en: "Recreation", ru: "Отдых" },
    hobby: { en: "Hobby", ru: "Хобби" },
    religia: { en: "Religion", ru: "Религия" },
    "Uniwersytet 3 Wieku": { en: "University of the Third Age", ru: "Университет третьего возраста" },
  };

  
  const i18nText = {
    en: {
      "rower miejski":
        "Info about the city bike system in Płock: how to rent, station locations and pricing.",
      "rozkład jazdy PKM":
        "Up-to-date timetable of Płock public transport (PKM). Check departures and plan your trip.",
      "rozkład jazdy KM": "Timetable for intercity connections to and from Płock.",
      "prawo jazdy":
        "How to obtain a Polish driving licence: exchange of a foreign licence, exams and required documents.",
      "prawo drogowe":
        "Basic road rules in Poland: traffic signs, regulations, fines and penalty points.",
      "rejestracja pojazdu":
        "Vehicle registration in Poland: required documents, fees, inspections and insurance.",
      PESEL:
        "PESEL is the national identification number in Poland. Learn how to obtain it and what it is used for.",
      "karta pobytu":
        "Residence card for foreigners: types, application procedure and required documents.",
      obywatelstwo:
        "Applying for Polish citizenship: eligibility, documents, steps and timelines.",
      wiza:
        "Visa types for Poland: tourist, business, student — requirements and procedures.",
      "polskie nr telefonu":
        "Getting a Polish phone number: mobile operators, plans and required documents.",
      ubezpieczenie:
        "Insurance system in Poland: public healthcare (NFZ), health and social insurance — how to get covered.",
      "finanse (konto bankowe)":
        "Opening a bank account in Poland: documents required, account types and common fees.",
      bezpieczeństwo:
        "Safety in Płock: emergency numbers, police stations and municipal guards.",

      żłobek:
        "Nurseries in Płock. Admission procedure, required documents, fees, and the list of facilities.",
      przedszkole:
        "Kindergartens in Płock. Enrollment, curriculum, and preparation for school.",
      "szkoła podstawowa":
        "Primary education in Poland. School catchment areas, enrollment procedure, and curriculum.",
      "szkoła ponadpodstawowa":
        "Secondary education: general, technical and vocational schools. Admissions, profiles, and final exams.",
      dorośli:
        "Adult education in Płock. Evening schools, Polish language courses, universities, and qualifications.",

      "zezwolenie na pracę":
        "Work permit for foreigners in Poland: types (A–E), who needs it, application steps, processing time, and required documents.",
      "urząd pracy":
        "Płock County Labour Office: job offers, career counselling, trainings, registration of the unemployed and available benefits.",
      "centralna baza pracy":
        "How to use the national job database: creating an account, searching offers, filters, and how to apply safely.",
      KRS:
        "National Court Register (KRS): where to check a company, what data you can verify, and why it matters for employment or cooperation.",
      CEIDG:
        "Central Registration and Information on Business (CEIDG): how to verify a sole trader and how to register your own business.",
      "własny biznes":
        "Starting your own business in Poland: forms of activity, CEIDG/KRS registration, taxes and social contributions, and basic obligations.",

      "pomoc prawna":
        "Free legal aid in Płock: where to get help, who is eligible, how to book a visit and what documents to bring.",
      "wybór przychodni POZ":
        "Primary Care (POZ): how to choose a GP clinic, register, change your doctor and what services you can use.",
      "gdzie się leczyć - NFZ":
        "Public healthcare (NFZ): how the system works, referrals, emergencies, night & holiday care and useful links.",
      MOPS:
        "Municipal Social Welfare Centre (MOPS): benefits, social assistance, crisis support and how to apply.",
      apteka:
        "Pharmacies in Płock: opening hours, duty pharmacies at night/holidays, prescriptions and OTC medicines.",
      recepta:
        "E-prescription system: how to receive, share and redeem prescriptions; co-payments and reimbursed medicines.",

      "zakup mieszkania":
        "Buying a home in Poland: legal steps, mortgages, taxes and the notary process.",
      wynajem:
        "Renting a flat: tenant and landlord rights, lease agreements, deposits, utilities and tenant protection.",
      "mieszkanie socjalne":
        "Social housing in Płock: eligibility, how to apply, required documents and waiting lists.",
      "zakwaterowanie zbiorowe":
        "Temporary/collective accommodation for newcomers: hostels, shelters and municipal support.",

      "KALENDARZ IMPREZ": "Events calendar",
      "desc_KALENDARZ IMPREZ":
        "Up-to-date calendar of cultural, sports and public events in Płock and surroundings.",
      "PŁOCK ARTA": "Płock Arta",
      "desc_PŁOCK ARTA":
        "Information about art exhibitions, galleries, concerts and cultural events under the Płock Arta project.",
      POKIS: "POKiS",
      "desc_POKIS":
        "Płock Center for Culture and Arts: schedule of events, concerts, performances and festivals.",
      MOSIR: "MOSiR",
      "desc_MOSIR":
        "Municipal Sports and Recreation Center of Płock (MOSiR): sports facilities, fitness classes, swimming pool, tennis courts, hall rentals and organization of sports events.",
      MDK: "Youth Culture House",
      "desc_MDK":
        "Clubs, workshops, concerts and activities for children and youth at the Youth Culture House.",
      SDK: "Old Culture House",
      "desc_SDK":
        "Cultural events, hobby clubs, exhibitions and concerts at the Old Culture House.",
      "KSIĄŻNICA PŁOCKA": "Płock Library",
      "desc_KSIĄŻNICA PŁOCKA":
        "City library: books, reading rooms, book clubs, lectures and cultural events.",
      SPORT: "Sport",
      "desc_SPORT":
        "Sports sections, competitions, fitness activities and available sports facilities in Płock.",
      KULTURA: "Culture",
      "desc_KULTURA":
        "Theatre, museum, exhibition, concert and other cultural event listings in the city.",
      REKREACJA: "Recreation",
      "desc_REKREACJA":
        "Parks, walking areas, cycling routes and other places for active leisure.",
      HOBBY: "Hobby",
      "desc_HOBBY":
        "Interest clubs, workshops and hobby groups for adults and children.",
      RELIGIA: "Religion",
      "desc_RELIGIA":
        "Churches, religious services, events and communities in Płock.",
      "UNIWERSYTET 3 WIEKU": "University of the Third Age",
      "desc_UNIWERSYTET 3 WIEKU":
        "Educational and cultural programs for seniors: lectures, courses, trips and meetings.",
    },
    ru: {
      "rower miejski":
        "О системе городских велосипедов в Плоцке: аренда, станции и стоимость.",
      "rozkład jazdy PKM":
        "Актуальное расписание городского транспорта Плоцка (PKM). Смотрите отправления и планируйте поездку.",
      "rozkład jazdy KM": "Расписание междугородних соединений из/в Плоцк.",
      "prawo jazdy":
        "Как получить польские водительские права: обмен иностранных прав, экзамены и документы.",
      "prawo drogowe":
        "Основы ПДД в Польше: знаки, правила, штрафы и штрафные баллы.",
      "rejestracja pojazdu":
        "Регистрация автомобиля в Польше: документы, сборы, техосмотр и страховка.",
      PESEL:
        "PESEL — национальный идентификационный номер в Польше. Как получить и зачем он нужен.",
      "karta pobytu":
        "Карта побыту для иностранцев: виды, порядок подачи заявления и необходимые документы.",
      obywatelstwo:
        "Получение польского гражданства: условия, документы, шаги и сроки.",
      wiza:
        "Виды виз в Польшу: туристическая, бизнес, студенческая — требования и процедуры.",
      "polskie nr telefonu":
        "Как получить польский номер телефона: операторы, тарифы и документы.",
      ubezpieczenie:
        "Система страхования в Польше: госмедицина (NFZ), мед- и соцстрахование — как оформить.",
      "finanse (konto bankowe)":
        "Открытие банковского счёта в Польше: документы, типы счетов и комиссии.",
      bezpieczeństwo:
        "Безопасность в Плоцке: экстренные номера, отделения полиции и муниципальная стража.",

      żłobek:
        "Ясли в Плоцке. Порядок записи, необходимые документы, оплатa и список учреждений.",
      przedszkole:
        "Детские сады в Плоцке. Запись, программа и подготовка к школе.",
      "szkoła podstawowa":
        "Начальная школа в Польше. Прикрепление к школам по месту жительства, запись и программа обучения.",
      "szkoła ponadpodstawowa":
        "Среднее образование: лицеи, техникумы и профшколы. Поступление, профили и выпускные экзамены.",
      dorośli:
        "Образование взрослых в Плоцке. Вечерние школы, курсы польского языка, университеты и квалификации.",

      "zezwolenie na pracę":
        "Разрешение на работу для иностранцев в Польше: виды (A–E), кому нужно, порядок подачи, сроки и необходимые документы.",
      "urząd pracy":
        "Повятовый центр занятости в Плоцке: вакансии, профконсультации, курсы, регистрация безработных и доступные пособия.",
      "centralna baza pracy":
        "Как пользоваться центральной базой вакансий: создание аккаунта, поиск, фильтры и безопасная подача отклика.",
      KRS:
        "Национальный судебный реестр (KRS): где проверить компанию, какие данные видно и почему это важно при работе/сотрудничестве.",
      CEIDG:
        "Центральный реестр предпринимателей (CEIDG): как проверить ФОП и как зарегистрировать собственную деятельность.",
      "własny biznes":
        "Открытие собственного бизнеса в Польше: формы деятельности, регистрация в CEIDG/KRS, налоги и взносы, базовые обязанности.",

      "pomoc prawna":
        "Бесплатная юридическая помощь в Плоцке: где получить, кто имеет право, как записаться и какие документы взять.",
      "wybór przychodni POZ":
        "Первичная медпомощь (POZ): как выбрать поликлинику/врача, зарегистрироваться, сменить врача и что входит в услуги.",
      "gdzie się leczyć - NFZ":
        "Госмедицина (NFZ): как устроена система, направления, экстренная помощь, ночная и праздничная помощь.",
      MOPS:
        "Муниципальный центр соцпомощи (MOPS): пособия, социальная поддержка, помощь в кризисных ситуациях и подача заявлений.",
      apteka:
        "Аптеки в Плоцке: часы работы, дежурные аптеки ночью/в праздники, рецептурные и безрецептурные лекарства.",
      recepta:
        "Система e-recept: как получить, передать и погасить рецепт; доплаты и возмещаемые лекарства.",

      "zakup mieszkania":
        "Покупка жилья в Польше: юридические шаги, ипотека, налоги и оформление у нотариуса.",
      wynajem:
        "Аренда квартиры: права арендатора и наймодателя, договор найма, залог, коммунальные платежи и защита жильцов.",
      "mieszkanie socjalne":
        "Социальное жильё в Плоцке: кто имеет право, как подать заявление, необходимые документы и лист ожидания.",
      "zakwaterowanie zbiorowe":
        "Временное/групповое размещение для приезжих: хостелы, приюты и городская поддержка.",

      "KALENDARZ IMPREZ":
        "Актуальный календарь культурных, спортивных и общественных мероприятий в Плоцке и окрестностях.",
      "PŁOCK ARTA":
        "Информация о художественных выставках, галереях, концертах и культурных событиях в рамках проекта Płock Arta.",
      POKIS:
        "Плоцкий центр культуры и искусств: афиша мероприятий, концертов, спектаклей и фестивалей.",
      MOSIR:
        "Муниципальный спортивный и рекреационный центр Плоцка (MOSiR): спортивные объекты, фитнес-занятия, бассейн, теннисные корты, аренда залов и организация спортивных мероприятий.",
      MDK:
        "Кружки, мастер-классы, концерты и мероприятия для детей и молодёжи в Молодёжном доме культуры.",
      SDK:
        "Культурные мероприятия, клубы по интересам, выставки и концерты в Старом доме культуры.",
      "KSIĄŻNICA PŁOCKA": 
        "Городская библиотека: книги, читальные залы, клубы читателей, лекции и культурные события.",
      SPORT: 
        "Спортивные секции, соревнования, фитнес и доступные спортивные объекты Плоцка.",
      KULTURA:
        "Афиша театров, музеев, выставок, концертов и других культурных мероприятий города.",
      REKREACJA:
        "Парки, прогулочные зоны, веломаршруты и другие места для активного отдыха.",
      HOBBY: 
        "Клубы по интересам, мастер-классы и кружки для взрослых и детей.",
      RELIGIA: 
        "Храмы, богослужения, религиозные мероприятия и общины Плоцка.",
      "UNIWERSYTET 3 WIEKU":
        "Образовательные и культурные программы для пожилых людей: лекции, курсы, экскурсии и встречи.",
    },
  };

  
  const norm = (s) =>
    (s || "")
      .toString()
      .normalize("NFD")
      .replace(/[\u0300-\u036f]/g, "")
      .toLowerCase()
      .trim();

  
  const labelsIndex = {};
  Object.keys(i18nLabels).forEach((k) => {
    labelsIndex[norm(k)] = i18nLabels[k];
  });

  
  const longIndex = {};
  Object.keys(i18nText).forEach((langKey) => {
    longIndex[langKey] = {};
    Object.keys(i18nText[langKey]).forEach((k) => {
      longIndex[langKey][norm(k)] = i18nText[langKey][k];
    });
  });

  
  const tilesContainer = document.getElementById("tilesContainer");
  const pageTitle = document.getElementById("pageTitle");
  const breadcrumb = document.getElementById("breadcrumb");
  const contentPage = document.getElementById("contentPage");
  const contentTitle = document.getElementById("contentTitle");
  const contentText = document.getElementById("contentText");

  let currentPath = []; 
  let lang = localStorage.getItem("lang") || "pl";

  
  const isLeaf = (node) => typeof node === "string";
  function getNode(path = currentPath) {
    let n = menuStructure;
    for (const k of path) n = n[k];
    return n;
  }
  function getParent(path = currentPath) {
    if (path.length === 0) return null;
    let n = menuStructure;
    for (let i = 0; i < path.length - 1; i++) n = n[path[i]];
    return n;
  }
  function getContainerForTiles() {
    const node = getNode();
    return isLeaf(node) ? getParent() || menuStructure : node;
  }

  
  function tStatic(keyPath) {
    const parts = keyPath.split(".");
    let v = i18n[lang];
    for (const p of parts) v = v?.[p];
    return typeof v === "string" ? v : "";
  }

  function tLabel(key) {
    const entry = labelsIndex[norm(key)];
    const v = entry?.[lang];
    return (v || key).toUpperCase();
  }

  function tLong(key, fallback) {
    const v = longIndex[lang]?.[norm(key)];
    return v || fallback || key;
  }

  
  function renderTiles(data) {
    if (typeof data === "string") data = getContainerForTiles(); 
    tilesContainer.innerHTML = "";
    tilesContainer.style.display = "grid";
    contentPage.style.display = "none";

    Object.keys(data).forEach((key) => {
      const tile = document.createElement("div");
      tile.className = "tile";
      tile.innerHTML = `<div class="tile-title">${tLabel(key)}</div>`;
      tile.addEventListener("click", () => onTileClick(key, data[key]));
      tilesContainer.appendChild(tile);
    });

    updateHeaderAndBreadcrumbs();
  }

  function renderContent(titleKey, baseText) {
    tilesContainer.style.display = "none";
    contentPage.style.display = "block";
    contentTitle.textContent = tLabel(titleKey);
    contentText.textContent = tLong(titleKey, baseText);
    updateHeaderAndBreadcrumbs();
  }

  function onTileClick(key, value) {
    currentPath.push(key);
    if (isLeaf(value)) {
      renderContent(key, value);
    } else {
      renderTiles(value);
    }
  }

  
  function updateHeaderAndBreadcrumbs() {
    const root = tStatic("rootCrumb");
    pageTitle.textContent = currentPath.length
      ? tLabel(currentPath[currentPath.length - 1])
      : tStatic("title");

    const items = [root, ...currentPath.map((k) => tLabel(k))];
    if (items.length <= 1) {
      breadcrumb.style.display = "none";
      return;
    }
    breadcrumb.style.display = "block";
    breadcrumb.innerHTML = items
      .map((txt, idx) => {
        if (idx === items.length - 1) return txt;
        return `<span class="breadcrumb-item" onclick="navigateTo(${idx})">${txt}</span>`;
      })
      .join(" > ");
  }

  window.navigateTo = function (idx) {
    if (idx === 0) {
      currentPath = [];
      renderTiles(menuStructure);
    } else {
      currentPath = currentPath.slice(0, idx);
      renderTiles(getContainerForTiles());
    }
  };

  
  document.getElementById("backIcon").addEventListener("click", (e) => {
    if (currentPath.length === 0) return; 
    e.preventDefault();

    const node = getNode();
    if (isLeaf(node)) {
      
      contentPage.style.display = "none";
      tilesContainer.style.display = "grid";
      renderTiles(getContainerForTiles());
    } else {
      
      currentPath.pop();
      renderTiles(getContainerForTiles());
    }
  });

  
  const menuIcon = document.getElementById("menuIcon");
  const phoneIcon = document.getElementById("phoneIcon");
  const languageIcon = document.getElementById("languageIcon");
  const menuDropdown = document.getElementById("menuDropdown");
  const phoneDropdown = document.getElementById("phoneDropdown");
  const languageDropdown = document.getElementById("languageDropdown");
  const overlay = document.getElementById("overlay");

  const closeAll = () => {
    menuDropdown.classList.remove("show");
    phoneDropdown.classList.remove("show");
    languageDropdown.classList.remove("show");
    overlay.classList.remove("show");
  };

  menuIcon.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAll();
    menuDropdown.classList.toggle("show");
    overlay.classList.toggle("show");
  });
  phoneIcon.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAll();
    phoneDropdown.classList.toggle("show");
    overlay.classList.toggle("show");
  });
  languageIcon.addEventListener("click", (e) => {
    e.stopPropagation();
    closeAll();
    languageDropdown.classList.toggle("show");
    overlay.classList.toggle("show");
  });
  overlay.addEventListener("click", closeAll);
  document.addEventListener("click", (e) => {
    if (
      !e.target.closest(".dropdown") &&
      !e.target.closest(".menu-icon") &&
      !e.target.closest(".phone-icon") &&
      !e.target.closest(".language-icon")
    )
      closeAll();
  });

  document.querySelectorAll(".menu-dropdown .dropdown-item").forEach((it) => {
    it.addEventListener("click", () => {
      const link = it.getAttribute("data-link");
      if (link) location.href = link;
      closeAll();
    });
  });
  document.querySelectorAll(".phone-dropdown .dropdown-item").forEach((it) => {
    it.addEventListener("click", () => {
      const n = it.querySelector(".phone-number").textContent;
      console.log("Dial:", n);
      closeAll();
    });
  });
  document.querySelectorAll(".dropdown").forEach((d) =>
    d.addEventListener("click", (e) => e.stopPropagation())
  );

  function applyStaticTexts() {
    document.documentElement.lang = lang;
    const headTitle = tStatic("headTitle");
    const headTitleEl = document.querySelector('title[data-i18n="headTitle"]');
    if (headTitle && headTitleEl) headTitleEl.textContent = headTitle;

    
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const val = tStatic(key);
      if (val) el.textContent = val;
    });

    
    const node = getNode();
    if (isLeaf(node)) {
      const k = currentPath[currentPath.length - 1];
      renderContent(k, node);
    } else {
      renderTiles(getContainerForTiles());
    }
  }

  document.querySelectorAll(".language-dropdown .language-item").forEach((it) => {
    it.addEventListener("click", () => {
      lang = it.getAttribute("data-lang");
      localStorage.setItem("lang", lang);
      applyStaticTexts();
      closeAll();
    });
  });

  
  applyStaticTexts();
  renderTiles(menuStructure);
</script>

</body>
</html>
